<!doctype HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
	<script src="https://rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
	<script src="triangleset.js"></script>
	<script type="text/javascript">
    AFRAME.registerComponent('drag-rotate-component',{
      schema : { speed : {default:1}},
      init : function(){
        this.ifMouseDown = false;
        this.x_cord = 0;
        this.y_cord = 0;
        document.addEventListener('mousedown',this.OnDocumentMouseDown.bind(this));
        document.addEventListener('mouseup',this.OnDocumentMouseUp.bind(this));
        document.addEventListener('mousemove',this.OnDocumentMouseMove.bind(this));
      },
      OnDocumentMouseDown : function(event){
        this.ifMouseDown = true;
        this.x_cord = event.clientX;
        this.y_cord = event.clientY;
      },
      OnDocumentMouseUp : function(){
        this.ifMouseDown = false;
      },
      OnDocumentMouseMove : function(event)
      {
        if(this.ifMouseDown)
        {
          var temp_x = event.clientX-this.x_cord;
          var temp_y = event.clientY-this.y_cord;
          if(Math.abs(temp_y)<Math.abs(temp_x))
          {
            this.el.object3D.rotateY(temp_x*this.data.speed/100);
          }
          else
          {
            this.el.object3D.rotateX(temp_y*this.data.speed/100);
          }
          this.x_cord = event.clientX;
          this.y_cord = event.clientY;
        }
      }
    });
  </script>
</head>
<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs='sourceType: webcam; trackingMethod: best; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;'>

	  <a-assets>
        	<a-asset-item id="model" src="imagens/CesiumMan.gltf"></a-asset-item>
      	  </a-assets>
   
  <a-marker type="barcode" value="0">
	  <a-entity position="-0.4 0 -0.4" id="antiprisma" scale="0.4 0.4 0.4" drag-rotate-component>
			<a-entity geometry="primitive: triangleset; vertices: 1 1.5 -0.41  2 0 0  2.41 1.5 1  2 0 2  1 1.5 2.41  0 0 2  -0.41 1.5 1  0 0 0  1 1.5 -0.41; projectdir: y" 
				material="color: red; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
			<a-entity geometry="primitive: triangleset; vertices: 0 0 0  2 0 0  2 0 2  0 0 2; projectdir: y" 
				material="color: yellow; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
			<a-entity geometry="primitive: triangleset; vertices: 1 1.5 -0.41  2.41 1.5 1  1 1.5 2.41  -0.41 1.5 1; projectdir: y" 
				material="color: yellow; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
			<a-entity geometry="primitive: triangleset; vertices: 0 0 0  2 0 0  1 1.5 -0.41; projectdir: y"
				material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
			<a-entity geometry="primitive: triangleset; vertices: 2 0 0  2 0 2  2.41 1.5 1; projectdir: y"
				material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
			<a-entity geometry="primitive: triangleset; vertices: 2 0 2  0 0 2  1 1.5 2.41; projectdir: y"
				material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
			<a-entity geometry="primitive: triangleset; vertices: 0 0 2  0 0 0  -0.41 1.5 1; projectdir: y"
				material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		</a-entity> 
    </a-marker>

  <a-marker type="barcode" value="1">
	<a-entity position="-0.4 0 -0.4" id="antiprisma2" scale="0.4 0.4 0.4">
		<a-entity geometry="primitive: triangleset; vertices: 1 1.5 -0.41  2 0 0  2.41 1.5 1  2 0 2  1 1.5 2.41  0 0 2  -0.41 1.5 1  0 0 0  1 1.5 -0.41; projectdir: y" 
			material="color: red; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 0 0 0  2 0 0  2 0 2  0 0 2  1 -1 1; projectdir: y" 
			material="color: grey; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 1 1.5 -0.41  2.41 1.5 1  1 1.5 2.41  -0.41 1.5 1  1 2.5 1; projectdir: y" 
			material="color: grey; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 0 0 0  2 0 0  1 1.5 -0.41; projectdir: y"
			material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 2 0 0  2 0 2  2.41 1.5 1; projectdir: y"
			material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 2 0 2  0 0 2  1 1.5 2.41; projectdir: y"
			material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 0 0 2  0 0 0  -0.41 1.5 1; projectdir: y"
			material="color: green; roughness: 0.1; opacity: 0.85; metalness: 0.3; side: double"></a-entity>
	</a-entity>
    </a-marker>

  <a-marker type="barcode" value="2">
	<a-box position='0 0.5 0' material='opacity: 0.5; side: double; color:green;'>
		<a-torus-knot radius='0.26' radius-tubular='0.05'>
			<a-animation attribute="rotation" to="360 0 0" dur="5000" easing='linear' repeat="indefinite"></a-animation>
		</a-torus-knot>
	</a-box>
    </a-marker>	  
	  
  <a-marker type="barcode" value="3">
	<a-entity position="-0.4 0 -0.4" id="piramide" scale="0.4 0.4 0.4">
	  <a-entity geometry="primitive: triangleset; vertices: 0 0 0  2 0 0  2 0 2  0 0 2  1 3 1; projectdir: y" 
		material="color: blue; opacity: 0.85; roughness: 0.1; metalness: 0.3; side: double"></a-entity>
	</a-entity>
    </a-marker>
	  
   <a-marker type="barcode" value="4">
	<a-entity position="-0.4 0 -0.4" id="prisma" scale="0.7 0.7 0.7">
		<a-entity geometry="primitive: triangleset; vertices: 0 0 0  1 0 0  1.31 0 0.95  0.5 0 1.54  -0.31 0 0.95; projectdir: y" 
			material="color: orange; roughness: 0.1; opacity: 0.85; metalness: 0.05; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 0 1 0  1 1 0  1.31 1 0.95  0.5 1 1.54  -0.31 1 0.95; projectdir: y" 
			material="color: orange; roughness: 0.1; opacity: 0.85; metalness: 0.05; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 1 0 0  1 1 0  0 1 0  0 0 0  0 1 0  -0.31 1 0.95  -0.31 0 0.95; projectdir: z" 
			material="color: orange; roughness: 0.1; opacity: 0.85; metalness: 0.05; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: -0.31 0 0.95 -0.31 1 0.95  0.5 1 1.54  0.5 0 1.54  0.5 1 1.54  1.31 1 0.95  1.31 0 0.95; projectdir: z" 
			material="color: orange; roughness: 0.1; opacity: 0.85; metalness: 0.05; side: double"></a-entity>
		<a-entity geometry="primitive: triangleset; vertices: 1.31 0 0.95 1.31 1 0.95  1 1 0  1 0 0; projectdir: z" 
			material="color: orange; roughness: 0.1; opacity: 0.85; metalness: 0.05; side: double"></a-entity>
	</a-entity>
    </a-marker>
	  
    <a-marker type="barcode" value="5">
	<a-dodecahedron position="0 0 0" color="magenta" radius="0.6" material="color: magenta; roughness: 0.1; opacity: 0.85; metalness: 0.05; side: double"></a-dodecahedron>
    </a-marker>
	  

    <a-entity camera></a-entity>
  </a-scene>
</body>
</html>
